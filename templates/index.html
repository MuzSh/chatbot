<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Chat Bot</title>
</head>

<body>
    <!-- import styles -->
    <link href="/style.css" rel="stylesheet">
    <div id = chat-container?>
        <div id = "chat-history"></div>
        <input type="text" id="text-input" placeholder="write your question"></input>
        <button id = "send-button">send</button>
    </div>
    <script>
        const chatHistory = document.getElementById("chat-history");
        const textInput = document.getElementById("text-input");
        const submitButton = document.getElementById("submit-button");

        submitButton.addEventListener("click", function(){
            const userMessage = textInput.value;
            
            const userMessageDiv = document.createElement("div");
            userMessageDiv.classList.add("chat-message");
            userMessageDiv.classList.add("user-message");
            userMessageDiv.innerHTML = userMessage;
            chatHistory.appendChild(userMessage);
            textInput.value = "";

            fetch("/chat", { 
                method: "POST",
                headers: {"Context-Type": "application/x-www-form-urlencoded"},
                body: `text=${userMessage}`
            })
        
            .then(response => response.text())
            ,then(response => {
                const chatbotMessageDiv = document.createElement("div");
                chatbotMessageDiv.classList.add("chat-message");
                chatbotMessageDiv.classList.add("chatbot-message");
                chatbotMessageDiv.innerHTML=response;
                chatHistory.appendChild(chatbotMessageDiv);
            })
        });
    </script>
</body>

</html>